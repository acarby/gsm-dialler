# Enable URL rewriting
RewriteEngine On

# Set index.php as default directory index
DirectoryIndex index.php index.html

# Redirect /index.php to / (remove index.php from URL)
RewriteCond %{THE_REQUEST} \s/+index\.php[\s?] [NC]
RewriteRule ^index\.php$ / [R=301,L]

# Redirect /login.php to /login (remove .php from login URL)
RewriteCond %{THE_REQUEST} \s/+login\.php[\s?] [NC]
RewriteRule ^login\.php$ /login [R=301,L]

# If accessing root and no file specified, serve index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^$ index.php [L]

# If accessing /login and file doesn't exist, serve login.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/login/?$
RewriteRule ^login/?$ login.php [L]

# If accessing /reboot and file doesn't exist, serve reboot.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/reboot/?$
RewriteRule ^reboot/?$ reboot.php [L]

# Allow direct access to existing files
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Allow direct access to existing directories
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

